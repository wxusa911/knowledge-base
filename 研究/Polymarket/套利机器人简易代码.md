# 🎯 Polymarket套利机器人 - 简易代码实现

*更新: 2026-03-01*

---

## 核心原理

### YES + NO 应该 = $1

当 YES + NO < $1 时，买入两边，结算得$1 = 纯利润

---

## 最简单的Python代码

```python
import requests

# 1. 获取市场价格
def get_price(condition_id):
    url = f"https://gamma-api.polymarket.com/markets/{condition_id}"
    r = requests.get(url).json()
    return {
        'yes': float(r.get('bestYes', 0)),
        'no': float(r.get('bestNo', 0))
    }

# 2. 检测套利机会
def check_arbitrage(condition_id):
    price = get_price(condition_id)
    total = price['yes'] + price['no']
    
    if total < 1.0:
        profit = 1.0 - total
        return True, profit, price
    return False, 0, price

# 3. 核心逻辑
while True:
    # 遍历市场
    markets = get_markets()
    
    for market in markets:
        condition_id = market['conditionId']
        is_arb, profit, price = check_arbitrage(condition_id)
        
        if is_arb:
            print(f"发现套利! 利润: {profit:.4f}")
            # 执行交易...
```

---

## 更高级的版本

```python
from py_clob_client.client import ClobClient

client = ClobClient(host, key=private_key, chain_id=137)

# 自动套利
def arbitrage():
    while True:
        markets = get_markets()
        
        for m in markets:
            yes_price = get_yes_price(m)
            no_price = get_no_price(m)
            
            if yes_price + no_price < 0.99:
                # 买入YES
                buy(m['yes_token'], yes_price, 100)
                # 买入NO
                buy(m['no_token'], no_price, 100)
                print(f"套利完成! 利润: {1.0 - (yes_price + no_price)}")
        
        time.sleep(1)  # 每秒检查
```

---

## 关键点

1. **延迟是关键** - 必须用WebSocket
2. **手续费** - 扣除手续费后还有利润才做
3. **资金量** - 本金越大赚得越多

---

## 需要的库

```bash
pip install py_clob_client requests websocket-client
```

---

## 更简单的策略: Carry Trade

```python
# Carry Trade - 成功率最高
def carry_trade():
    markets = get_markets()
    
    for m in markets:
        # 买最高概率 + 最低概率
        if m['yes_price'] > 0.95:
            buy(m['yes_token'])
        elif m['no_price'] > 0.95:
            buy(m['no_token'])
        
        # 等待结算
        # 赚取微小价差
```

---

## ⚠️ 注意事项

1. 手续费会吃掉利润
2. 需要足够资金
3. 机器人需要低延迟
4. 先用测试网!
